// File created: 2011-08-07 18:12:26

#include "staticaabb_impl.h"

#include <assert.h>
#include <stdlib.h>

#define mush_staticaabb_get_idx MUSHSPACE_CAT(mush_staticaabb,_get_idx)
#define mush_staticaabb_get_idx_no_offset \
	MUSHSPACE_CAT(mush_staticaabb,_get_idx_no_offset)

static size_t mush_staticaabb_get_idx_no_offset(mushcoords c) {
	size_t i = c.x;
#if MUSHSPACE_DIM >= 2
	i += STATICAABB_SIZE.x * c.y;
#if MUSHSPACE_DIM >= 3
	i += STATICAABB_SIZE.y * c.z;
#endif
#endif
	return i;
}
static size_t mush_staticaabb_get_idx(mushcoords c) {
	return mush_staticaabb_get_idx_no_offset(mushcoords_sub(c, STATICAABB_BEG));
}

bool mush_staticaabb_contains(mushcoords c) {
	return mushcoords_contains(c, STATICAABB_BEG, STATICAABB_END);
}

mushcell mush_staticaabb_get(mush_staticaabb* aabb, mushcoords c) {
	assert (mush_staticaabb_contains(c));
	return aabb->array[mush_staticaabb_get_idx(c)];
}
